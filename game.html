<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <title>Retro Snake Game</title>
    <link rel="icon" type="image/x-icon" href="./snake_JpL_icon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <script src="./jquery-3.6.4.js"></script>
</head>

<body>

    <h1>Retro Snake Game</h1>
    <p id="count"> Score: <span id="actual-score"> 0 </span></p>
    <canvas id="myCanvas" width="200" height="200"></canvas>
    <p id="msg"> Press Space to Start! </p>
    <h4> We are aware of an issue with the snake disapearing suddenly and are working to fix this! Thank you for your
        patience!</h4>
    <br></br>

    <button onclick="setHalfVolume()" type="button"><span class="options"></span>Lower Music Volume</button>
    <audio id="bgmusic" loop autoplay="" src="./8-bit-brawl.mp3"></audio>
    <button id="Restart" onclick="sendScoreAndRedirect()"><span class="options"></span> Try Again </button>

</body>
<script src="/snakeGame/main.js"></script>
<script>
    var music = document.getElementById("bgmusic");
    function setHalfVolume() {
        music.volume = 0.08;
    }

    function sendScoreAndRedirect() {
        var score = document.getElementById("actual-score").innerText;

        fetch('/snakeGame', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ score: score })
        }).then(function (response) {
            window.location.href = "/snakeGame";
        }).catch(function (error) {
            console.error(error);
        });
    }
</script>

</html>